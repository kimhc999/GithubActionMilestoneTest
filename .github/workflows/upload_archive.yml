name: ğŸ—‚ï¸ Upload Archive

on:
  milestone:
    types:
      - closed
  workflow_dispatch:

jobs:
  build:
    runs-on: default-4xlarge
    steps:
      - name: Check milestone version format and patch version
        run: |
          TITLE="${{ github.event.milestone.title }}"
          echo "Milestone title: $TITLE"

          # Check format x.y.z
          if [[ "$TITLE" =~ ^[0-9]+\.[0-9]+\.[0-9]+$ ]]; then
            PATCH=$(echo "$TITLE" | cut -d. -f3)
            if [ "$PATCH" == "0" ]; then
              echo "âœ… Success ìœ íš¨í•œ í¬ë©§ì´ë©° "
            else
              echo "âŒ ERROR íŒ¨ì¹˜ ë²„ì „ì´ 0ì´ ì•„ë‹™ë‹ˆë‹¤"
              exit 1
            fi
          else
            echo "âŒ ERROR ë§ˆì¼ìŠ¤í†¤ ëª…ì´ ìˆ«ì.ìˆ«ì.ìˆ«ì í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤. (e.g. 1.2.3)"
            exit 1
          fi

      - name: Second Step
        run: |
          echo "âœ… Second Step ì‹¤í–‰ ì„±ê³µ"